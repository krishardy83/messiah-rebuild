---
import type { HTMLAttributes } from "astro/types";
import { cn } from "../lib/utils";
import Icon from "./icon.astro";

interface Props extends HTMLAttributes<"article"> {
  name: string;
  job: string;
  image?: string;
  email?: string;
  phone?: string;
  fax?: string;
  url?: string;
}

const { name, job, image, email, phone, fax, url, class: className, ...props } = Astro.props;
---

<article
  data-analytics="employee-record"
  {...props}
  class={cn("@container not-prose border border-gray-300 bg-gray-100 px-6 py-4", className)}
>
  <div class="flex flex-col @md:flex-row gap-4">
    {
      image ? (
        <figure class="@md:w-1/3">
          <img src={image} alt={`image of ${name}`} />
        </figure>
      ) : null
    }

    <div class:list={[image ? "@md:w-2/3" : null]}>
      <h3 class="h4 text-primary-800">{name}</h3>
      <p class="text-tertiary-500 leading-none mb-2 font-title uppercase font-bold">{job}</p>

      {
        email || phone || fax || url ? (
          <ul class="border-y space-y-2 border-gray-300 py-2 my-2 text-sm">
            {email ? (
              <li class="flex items-center gap-2">
                <Icon name="envelope" class="size-5" />
                <a class="link text-primary-800" href={`mailto:${email}`}>
                  {email}
                </a>
              </li>
            ) : null}
            {phone ? (
              <li class="flex items-center gap-2">
                <Icon name="phone" class="size-5" />
                <a class="link text-primary-800" href={`tel:${phone}`}>
                  {phone}
                </a>
              </li>
            ) : null}
            {fax ? (
              <li class="flex items-center gap-2">
                <Icon name="printer" class="size-5" />
                {fax}
              </li>
            ) : null}
            {url ? (
              <li class="flex items-center gap-2">
                <Icon name="globe" class="size-5" />
                <a class="link text-primary-800" href={url}>
                  {url}
                </a>
              </li>
            ) : null}
          </ul>
        ) : null
      }

      <div class="text-sm">
        <slot />
      </div>
    </div>
  </div>
</article>
