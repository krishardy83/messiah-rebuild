---
import ProgramList, { type Program } from "../components/program-list.astro";
import { cn } from "../lib/utils";
import BaseLayout from "./base.astro";

interface Props {
  title: string;
  subtitle?: string;
  description: string;
  badge?: string;
  analyticsKey?: string;
  programs: Program[];
  image: string;
}

const { title, description, analyticsKey, subtitle, badge, programs, image } = Astro.props;
---

<BaseLayout title={title} description={description}>
  <header
    data-analytics={`${analyticsKey}-header`}
    class={`relative bg-[image:var(--bg-banner)] isolate bg-cover bg-no-repeat after:absolute after:inset-0 after:bg-gradient-to-b after:from-black/60 after:to-transparent -mt-48 before:absolute before:inset-0 before:bg-gradient-to-r before:from-primary-700/60 before:to-transparent`}
    style={{ "--bg-banner": `url(${image})` }}
    aria-hidden="true"
  >
    <div
      class="max-w-6xl mx-auto px-4 h-[70vw] min-h-[400px] max-h-[900px] flex items-end pb-4 pd:mb-0"
    >
      <div class="lg:w-3/4 relative z-10 md:mb-20">
        <div
          class={cn("flex gap-x-8 flex-wrap md:flex-nowrap items-center", {
            "md:mb-4": !subtitle,
          })}
        >
          <h1
            class="font-title font-bold text-xl sm:text-2xl md:text-3xl lg:text-5xl text-white uppercase mb-0"
          >
            {title}
          </h1>

          {
            badge ? (
              <span class="mb-4 md:mb-0 bg-white text-primary-800 font-title font-bold text-xl md:text-2xl lg:text-3xl px-2">
                {badge}
              </span>
            ) : null
          }
        </div>

        {subtitle ? <p class="mb-4 text-white text-lg">{subtitle}</p> : null}

        <ProgramList programs={programs} showText />
      </div>
    </div>
  </header>

  <main id="content" data-analytics={analyticsKey}>
    <slot />
  </main>
</BaseLayout>
