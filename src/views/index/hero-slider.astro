---
const slides = [
  {
    title: "Falcon Fridays are a great way to experience campus this summer!",
    description:
      "Tour our amazing campus, check out our exciting academic programs and spiritual growth opportunities-- and, of course, stick around for some ice cream!",
    button: "Become a student",
    image: "https://www.messiah.edu/images/ff.jpg",
    links: [
      {
        href: "https://www.messiah.edu/info/23324/falcon_fridays?element=homepage-car",
        label: "Learn more",
      },
    ],
  },
  {
    title: "Academic Excellence",
    description: "Experience the academic distinction of a nationally ranked Christian college",
    image: "https://www.messiah.edu/images/hero_academics.jpg",
    button: "Academic excellence",
    links: [
      {
        href: "https://www.messiah.edu/majors-minors-programs",
        label: "Undergrad programs",
      },
      {
        href: "http://www.messiah.edu/info/20436/degrees",
        label: "Graduate programs",
      },
    ],
  },
  {
    title: "Careers and Internships",
    description: "Explore your calling â€” from your first year through graduation",
    button: "Careers & internships",
    image: "https://www.messiah.edu/images/career_hero.jpg",
    links: [
      {
        href: "https://www.messiah.edu/career-outcomes",
        label: "Undergrad outcomes",
      },
      {
        href: "https://www.messiah.edu/grad-careers",
        label: "Graduate outcomes",
      },
    ],
  },
  {
    title: "Study Abroad",
    description: "Where in the world will you go?",
    button: "Study abroad",
    image: "https://www.messiah.edu/images/travel_hero.jpg",
    links: [
      {
        href: "https://www.messiah.edu/study-abroad",
        label: "Explore undergrad opportunities",
      },
    ],
  },
];
---

<div
  class="relative flex flex-col-reverse -mt-48"
  data-analytics="hero"
  x-data="{
    selected: null,

    init() {
      this.$nextTick(() => this.select(this.$id('tab', 1)));
    },

    select(id) {
      this.selected = id;
    },

    isSelected(id) {
      return this.selected === id;
    },

    whichChild(el, parent) {
      return Array.from(parent.children).indexOf(el) + 1;
    }
  }"
  x-id="['tab']"
>
  <ul
    x-ref="tablist"
    @keydown.right.prevent.stop="$focus.wrap().next()"
    @keydown.left.prevent.stop="$focus.wrap().prev()"
    @keydown.home.prevent.stop="$focus.first()"
    @keydown.end.prevent.stop="$focus.last()"
    role="tablist"
    class="hidden sm:flex absolute bottom-0 left-0 right-0 sm:bg-gradient-to-t from-black/75 to-transparent items-center flex-wrap"
  >
    {
      slides.map((slide) => (
        <li class="w-full sm:w-1/2 md:w-1/4 flex justify-center">
          <button
            @click="select($el.id)"
            @focus="select($el.id)"
            :aria-selected="isSelected($el.id)"
            :tabindex="isSelected($el.id) ? 0 : -1"
            :id="$id('tab', whichChild($el.parentElement, $refs.tablist))"
            type="button"
            role="tab" 
            class="text-white text-lg uppercase p-4 md:p-8 link text-center font-title font-bold aria-selected:text-tertiary-400 group"
          >
            <span class="inline-block border-b-4 border-transparent group-aria-selected:border-tertiary-400 pointer-events-none">
              {slide.button}
            </span>
          </button>
        </li>
      ))
    }
  </ul>

  <div>
    {
      slides.map((slide) => (
        <div
          role="tabpanel"
          x-show="isSelected($id('tab', whichChild($el, $el.parentElement)))"
          :aria-labelledby="$id('tab', whichChild($el, $el.parentElement))"
          class="w-full flex h-[75vw] min-h-[800px] max-h-[1200px] items-center bg-primary-800 bg-[linear-gradient(to_bottom,rgba(0,0,0,0.75),transparent),var(--bg-banner)] bg-cover bg-no-repeat"
          style={{ "--bg-banner": `url(${slide.image})` }}
        >
          <div class="max-w-[2100px] mx-auto px-4 lg:px-12 w-full">
            <p class="text-white h2 max-w-2xl">{slide.title}</p>
            <p class="text-white text-lg md:text-xl max-w-xl mb-8">{slide.description}</p>
            <div class="flex gap-2">
              {slide.links.map((link) => (
                <a href={link.href} class="btn-secondary">
                  {link.label}
                </a>
              ))}
            </div>
          </div>
        </div>
      ))
    }
  </div>
</div>
